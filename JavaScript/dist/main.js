!function(e){var a={};function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)r.d(t,n,function(a){return e[a]}.bind(null,n));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="",r(r.s=1)}([function(e,a,r){
/*!
 * accounting.js v0.4.1
 * Copyright 2014 Open Exchange Rates
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://openexchangerates.github.io/accounting.js/
 */
!function(r,t){var n={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},o=Array.prototype.map,s=Array.isArray,c=Object.prototype.toString;function i(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function l(e){return s?s(e):"[object Array]"===c.call(e)}function u(e){return e&&"[object Object]"===c.call(e)}function d(e,a){var r;for(r in e=e||{},a=a||{})a.hasOwnProperty(r)&&null==e[r]&&(e[r]=a[r]);return e}function p(e,a,r){var t,n,s=[];if(!e)return s;if(o&&e.map===o)return e.map(a,r);for(t=0,n=e.length;t<n;t++)s[t]=a.call(r,e[t],t,e);return s}function f(e,a){return e=Math.round(Math.abs(e)),isNaN(e)?a:e}function m(e){var a=n.settings.currency.format;return"function"==typeof e&&(e=e()),i(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:i(a)?n.settings.currency.format={pos:a,neg:a.replace("%v","-%v"),zero:a}:a}var v=n.unformat=n.parse=function(e,a){if(l(e))return p(e,function(e){return v(e,a)});if("number"==typeof(e=e||0))return e;a=a||n.settings.number.decimal;var r=new RegExp("[^0-9-"+a+"]",["g"]),t=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(r,"").replace(a,"."));return isNaN(t)?0:t},g=n.toFixed=function(e,a){a=f(a,n.settings.number.precision);var r=Math.pow(10,a);return(Math.round(n.unformat(e)*r)/r).toFixed(a)},h=n.formatNumber=n.format=function(e,a,r,t){if(l(e))return p(e,function(e){return h(e,a,r,t)});e=v(e);var o=d(u(a)?a:{precision:a,thousand:r,decimal:t},n.settings.number),s=f(o.precision),c=e<0?"-":"",i=parseInt(g(Math.abs(e||0),s),10)+"",m=i.length>3?i.length%3:0;return c+(m?i.substr(0,m)+o.thousand:"")+i.substr(m).replace(/(\d{3})(?=\d)/g,"$1"+o.thousand)+(s?o.decimal+g(Math.abs(e),s).split(".")[1]:"")},b=n.formatMoney=function(e,a,r,t,o,s){if(l(e))return p(e,function(e){return b(e,a,r,t,o,s)});e=v(e);var c=d(u(a)?a:{symbol:a,precision:r,thousand:t,decimal:o,format:s},n.settings.currency),i=m(c.format);return(e>0?i.pos:e<0?i.neg:i.zero).replace("%s",c.symbol).replace("%v",h(Math.abs(e),f(c.precision),c.thousand,c.decimal))};n.formatColumn=function(e,a,r,t,o,s){if(!e)return[];var c=d(u(a)?a:{symbol:a,precision:r,thousand:t,decimal:o,format:s},n.settings.currency),g=m(c.format),b=g.pos.indexOf("%s")<g.pos.indexOf("%v"),y=0,M=p(e,function(e,a){if(l(e))return n.formatColumn(e,c);var r=((e=v(e))>0?g.pos:e<0?g.neg:g.zero).replace("%s",c.symbol).replace("%v",h(Math.abs(e),f(c.precision),c.thousand,c.decimal));return r.length>y&&(y=r.length),r});return p(M,function(e,a){return i(e)&&e.length<y?b?e.replace(c.symbol,c.symbol+new Array(y-e.length+1).join(" ")):new Array(y-e.length+1).join(" ")+e:e})},e.exports&&(a=e.exports=n),a.accounting=n}()},function(e,a,r){"use strict";r.r(a);var t=r(0),n=r.n(t);class o{constructor(e){this.chave=e}listar(){return new Promise((e,a)=>{setTimeout(()=>{const a=localStorage.getItem(this.chave);e(a?JSON.parse(a):[])},400)})}salvar(e){return new Promise(a=>{setTimeout(()=>{localStorage.setItem(this.chave,JSON.stringify(e)),a()},400)})}}(async()=>{const e=new o("despesas"),a=new o("receitas"),r=(()=>{const e=document.getElementById("form-adicionar-receita"),a=document.getElementById("form-adicionar-despesa");return{cabecalho:{saldo:document.getElementById("saldo"),principal:document.getElementById("progresso-principal"),categorias:document.getElementById("progresso-categoria"),visalGeral:document.getElementById("visao-geral")},receita:{tabela:document.getElementById("tabela-receitas"),form:e,campos:{descricao:e.querySelector("[name=descricao]"),valor:e.querySelector("[name=valor]")}},despesa:{tabela:document.getElementById("tabela-despesas"),form:a,campos:{descricao:a.querySelector("[name=descricao]"),valor:a.querySelector("[name=valor]"),categoria:a.querySelector("[name=categoria]")}}}})(),t=[{identificador:"lazer",descricao:"Lazer",previsto:320},{identificador:"alimentacao",descricao:"Alimentação",previsto:800},{identificador:"moradia",descricao:"Moradia",previsto:700},{identificador:"transporte",descricao:"Transporte",previsto:500}],s=(e,a)=>e.reduce((e,r)=>((e[r[a]]=e[r[a]]||[]).push(r),e),{}),c=(e,a,r)=>Array(a-String(e).length+1).join(r||"0")+e,i=e=>{let a=e;return"string"==typeof e&&(a=new Date(e)),`${c(a.getDate(),2)}/${c(a.getMonth(),2)}`},l=(e,a)=>new Date(a)<new Date(e)?-1:new Date(a)>new Date(e)?1:0,u=e=>{const a=(e=>t.find(a=>a.identificador==e))(e.categoria).descricao;return`<tr>\n            <td class="coluna-descricao-transacao">\n                ${e.descricao}\n                <p class="categoria-label">${a}</p>\n            </td>\n            <td class="coluna-valor-transacao">${n.a.formatMoney(e.valor,"R$ ",2,".",",")}</td>\n        </tr>`},d=()=>{const e=s(b,"data");r.despesa.tabela.innerHTML="",Object.keys(e).sort(l).forEach(a=>{r.despesa.tabela.innerHTML+=`<tr>\n                    <td class="coluna-data" colspan="2">${i(a)}</td>                \n                </tr>`,e[a].forEach(e=>{r.despesa.tabela.innerHTML+=u(e)})})},p=()=>{const e=s(g,"data");r.receita.tabela.innerHTML="",Object.keys(e).sort(l).forEach(a=>{r.receita.tabela.innerHTML+=`<tr>\n                    <td class="coluna-data" colspan="2">${i(a)}</td>                \n                </tr>`,e[a].forEach(e=>{r.receita.tabela.innerHTML+=(e=>`<tr>\n            <td class="coluna-descricao-transacao">\n                ${e.descricao}\n                <p class="categoria-label">Receitas</p>\n            </td>\n            <td class="coluna-valor-transacao">${n.a.formatMoney(e.valor,"R$ ",2,".",",")}</td>\n        </tr>`)(e)})})},f=(e,a)=>{let r=0;return a.hasOwnProperty(e.identificador)&&(r=a[e.identificador]),`<div>\n            <h5><span class="ofuscado">${e.descricao} ${n.a.formatMoney(r,"R$ ",2,".",",")}</h5>\n            <progress value="${r}" max="${e.previsto}"></progress>\n        </div>`},m=e=>`<div class="visao-geral-container">\n            <h5><span class="ofuscado">${e.descricao}</h5>\n            <span class="texto-grande">${n.a.formatMoney(e.valor,"R$ ",2,".",",")}</span>\n        </div>`,v=()=>{const e=(()=>{const e=b.reduce((e,a)=>(e.hasOwnProperty(a.categoria)||(e[a.categoria]=0),e[a.categoria]+=Number.parseFloat(a.valor),e.despesas+=Number.parseFloat(a.valor),e),{despesas:0}),a=g.reduce((e,a)=>e+=Number.parseFloat(a.valor),0);return{...e,receitas:a,total:a-e.despesas}})();(e=>{const a=t.reduce((e,a)=>e+=a.previsto,0);r.cabecalho.principal.innerHTML="",r.cabecalho.principal.innerHTML+=f({descricao:"Receitas",identificador:"receitas",previsto:4e3},e),r.cabecalho.principal.innerHTML+=f({descricao:"Despesas",identificador:"despesas",previsto:a},e)})(e),(e=>{r.cabecalho.categorias.innerHTML="",t.forEach(a=>{r.cabecalho.categorias.innerHTML+=f(a,e)})})(e),(({receitas:e,despesas:a,total:t})=>{r.cabecalho.visalGeral.innerHTML="",r.cabecalho.visalGeral.innerHTML+=m({descricao:"Receitas",valor:e}),r.cabecalho.visalGeral.innerHTML+=m({descricao:"Despesas",valor:a}),r.cabecalho.visalGeral.innerHTML+=m({descricao:"Economia",valor:t})})(e);const{total:a}=e;r.cabecalho.saldo.innerHTML=n.a.formatMoney(a,"R$ ",2,".",",")};let g=[];const h=a.listar();h.then(e=>{g=e,p()});let b=[];const y=e.listar();y.then(e=>{b=e,d()}),await Promise.all([h,y]),v(),t.forEach(e=>{r.despesa.form.categoria.appendChild((e=>{const a=document.createElement("option");return a.innerHTML=e.descricao,a.value=e.identificador,a})(e))}),r.receita.form.onsubmit=async e=>{e.preventDefault();const t={data:new Date((new Date).setHours(0,0,0,0)).toISOString()};Object.keys(r.receita.campos).forEach(e=>{const{value:a}=r.receita.campos[e];t[e]=a}),g.push(t);try{await a.salvar(g),r.receita.form.reset(),p(),v(),alert("Receita salva com sucesso")}catch{alert("Ocorreu um erro ao salvar a receita")}},r.despesa.form.onsubmit=async a=>{a.preventDefault();const t={data:new Date((new Date).setHours(0,0,0,0)).toISOString()};Object.keys(r.despesa.campos).forEach(e=>{const{value:a}=r.despesa.campos[e];t[e]=a}),b.push(t);try{await e.salvar(b),r.despesa.form.reset(),d(),v(),alert("Despesa salva com sucesso")}catch{alert("Ocorreu um erro ao salvar a despesa")}}})()}]);